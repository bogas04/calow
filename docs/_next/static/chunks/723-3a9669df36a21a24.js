"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[723],{4175:function(e,n,t){var r=t(828),i=t(5893),o=t(3826),a=t(8641),s=t(7741),l=t(5868),c=t(7294),u=t(1976);function d(e){var n,t,c=e.item,d=e.isOpen,h=e.hideWeight,m=void 0!==h&&h,f=e.onClose,x=0!==Object.keys(null!==(n=c.micro)&&void 0!==n?n:{}).length;return(0,i.jsxs)(o.u_,{isOpen:d,onClose:f,size:"full",scrollBehavior:"inside",children:[(0,i.jsx)(o.ZA,{}),(0,i.jsxs)(o.hz,{pb:5,children:[(0,i.jsx)(o.xB,{children:(0,i.jsxs)(a.kC,{align:"center",justify:"space-between",children:[c.name," ",m?"":"(".concat(c.weight,"g)"),(0,i.jsx)(s.hU,{"aria-label":"close",rounded:"full",icon:(0,i.jsx)(l.P,{}),variant:"ghost",onClick:f})]})}),(0,i.jsxs)(o.fe,{children:[(0,i.jsx)(u.Z,{nutrition:c.nutrition,border:!1}),x&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.xv,{size:"lg",fontWeight:"600",mt:"5",mb:"2",children:"Micro Nutrients (in grams):"}),Object.entries(null!==(t=c.micro)&&void 0!==t?t:{}).map((function(e){var n=(0,r.Z)(e,2),t=n[0],o=n[1];return(0,i.jsxs)(a.kC,{justify:"space-between",align:"center",my:"1",children:[(0,i.jsx)(a.xv,{textTransform:"capitalize",fontWeight:"400",children:t}),(0,i.jsx)(a.xv,{children:Number(o*c.weight/100).toFixed(2)})]},t)}))]})]})]})]})}n.Z=(0,c.memo)(d)},6917:function(e,n,t){var r=t(6042),i=t(9396),o=t(9534),a=t(5893),s=t(1664),l=t.n(s),c=t(8641),u=t(7741),d=t(7294),h=t(1976),m=t(3750),f=t(4175);function x(e){var n=e.item,t=e.size,s=void 0===t?"lg":t,x=(0,o.Z)(e,["item","size"]),p=(0,d.useState)(!1),v=p[0],g=p[1];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c.xu,(0,i.Z)((0,r.Z)({borderWidth:"1px",borderStyle:"solid",borderColor:"gray.200",borderRadius:8,my:"sm"===s?3:5,p:"sm"===s?3:5},x),{children:[(0,a.jsx)(c.kC,{mb:"sm"===s?2:4,justify:"space-between",children:(0,a.jsx)(c.X6,{size:"sm"===s?"sm":"md",children:(0,a.jsx)(l(),{href:"/items?search=".concat(n.name),children:(0,a.jsxs)("a",{children:[(0,a.jsx)(c.xu,{as:"span",mx:"sm"===s?0:2,children:n.icon||"\ud83c\udf5b"})," ",n.name]})})})}),(0,a.jsxs)(c.kC,{justify:"space-between",align:"flex-start",children:[(0,a.jsx)(h.Z,{border:!1,nutrition:n.nutrition,transparentBg:!0,micro:n.micro}),n.micro&&(0,a.jsx)(u.hU,{variant:"ghost",rounded:"full",color:"gray.500",icon:(0,a.jsx)(m.evw,{}),"aria-label":"Micronutrients",onClick:function(){return g(!0)}})]}),(0,a.jsxs)(c.xv,{mt:"2",fontSize:"xs",color:"gray.600",fontWeight:"300",children:[n.weight,"g"]})]})),(0,a.jsx)(f.Z,{item:n,onClose:function(){return g(!1)},isOpen:v})]})}n.Z=(0,d.memo)(x)},196:function(e,n,t){t.d(n,{Z:function(){return S}});var r=t(828),i=t(5893),o=t(3382),a=t(8641),s=t(7741),l=t(5679),c=t(1197),u=t(7294),d=t(7516),h=t(3750),m=t(471),f=t(3437),x=t(5385),p=t(4175),v=t(6917),g=t(1976),j=t(4221),b=t(3826),y=t(979),w=t(5410),C=(0,u.memo)((function(e){var n,t,r=e.isOpen,l=e.onClose,c=e.meal,d=(0,j.pm)(),h=(0,u.useMemo)((function(){var e;if(!r)return"";c.name,Date.now(),c.items,c.totalWeight,c.portionWeight,c.nutrition,c.micro,c.water;var n=(null===(e=document.querySelector('meta[property="og:url"'))||void 0===e?void 0:e.getAttribute("content"))||"https://bogas04.github.io/calow/";return(0,w.lh)(c,n)}),[r,c]),m=(0,u.useCallback)((function(){var e,n,t=function(){return d({title:"Oops!",description:"We couldn't share the link at this moment",status:"error",duration:5e3,isClosable:!0})};(null===window||void 0===window||null===(e=window.navigator)||void 0===e||null===(n=e.share)||void 0===n?void 0:n.call(e,{title:c.name,url:h}).catch((function(){t()})))||t()}),[h,c.name,d]),f=(0,u.useCallback)((function(){window.navigator.clipboard.writeText(h).then((function(){d({title:"Copied!",description:"The shareable link is now in your clipboard",status:"success",duration:5e3,isClosable:!0})})).catch((function(){d({title:"Opps!",description:"We couldn't copy the link to your clipboard",status:"error",duration:5e3,isClosable:!0})}))}),[h,d]),x=(null===window||void 0===window||null===(n=window.navigator)||void 0===n||null===(t=n.canShare)||void 0===t?void 0:t.call(n))||"function"===typeof(null===window||void 0===window?void 0:window.navigator.share);return(0,i.jsxs)(b.u_,{isOpen:r,onClose:l,isCentered:!0,scrollBehavior:"outside",motionPreset:"slideInBottom",children:[(0,i.jsx)(b.ZA,{height:"100vh"}),(0,i.jsxs)(b.hz,{position:"fixed",bottom:"0px",mb:"0",borderRadius:"1.75rem 1.75rem 0px 0px",minW:["100vw","lg"],children:[(0,i.jsx)(b.xB,{mt:"2",children:"Share Meal"}),(0,i.jsx)(b.ol,{mt:"2"}),(0,i.jsxs)(b.fe,{pb:"5",children:[(0,i.jsx)(a.xv,{children:"Here's a link you can share with your buddy who wants to add this meal to their log."}),(0,i.jsxs)(y.BZ,{my:"4",children:[(0,i.jsx)(y.II,{type:"text",defaultValue:h,disabled:!0}),(0,i.jsx)(y.xW,{px:0,mx:0,bg:"gray.50",children:(0,i.jsx)(s.hU,{icon:(0,i.jsx)(o.TI,{}),variant:"flushed",onClick:f,"aria-label":"Copy Link"})})]}),x?(0,i.jsx)(s.zx,{w:"full",onClick:m,bg:"blue.500",color:"white",size:"lg",children:"Share"}):null]})]})]})}));function k(e){var n=e.meal,t=e.onRepeat,j=e.onDelete,b=e.onEdit,y=e.onBookmark,w=e.bookmarked,k=(0,u.useState)(!1),S=k[0],W=k[1],A=(0,u.useState)(!1),R=A[0],O=A[1],Z=(0,u.useState)(!1),N=Z[0],z=Z[1],M=(0,u.useCallback)((function(){return O(!1)}),[]),P=(0,u.useCallback)((function(){return O(!0)}),[]),U=(0,u.useCallback)((function(){return z(!1)}),[]),I=(0,u.useCallback)((function(){return z(!0)}),[]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(a.kC,{justify:"space-between",align:"center",mb:"2",children:[(0,i.jsx)(a.X6,{size:"md",children:n.name}),(0,i.jsxs)(a.kC,{justify:"flex-end",align:"center",children:[(0,i.jsx)(s.hU,{isRound:!0,size:"sm",variant:"ghost","aria-label":"Show micro nutrients",onClick:P,icon:(0,i.jsx)(m.bRw,{})}),(0,i.jsx)(s.hU,{isRound:!0,size:"sm",variant:"ghost","aria-label":S?"Hide Details":"Show Details",onClick:function(){return W(!S)},icon:S?(0,i.jsx)(o.g8,{}):(0,i.jsx)(o.v4,{})}),(0,i.jsxs)(l.v2,{children:[(0,i.jsx)(l.j2,{as:s.hU,icon:(0,i.jsx)(h.FQA,{}),"aria-label":"Options",variant:"ghost",size:"sm",rounded:"full"}),(0,i.jsxs)(l.qy,{minW:10,children:[b&&(0,i.jsxs)(l.sN,{onClick:b,children:[(0,i.jsx)(o.dY,{mr:2}),"Edit"]}),j&&(0,i.jsxs)(l.sN,{onClick:j,children:[(0,i.jsx)(o.pJ,{mr:2}),"Delete"]}),(0,i.jsxs)(l.sN,{onClick:I,children:[(0,i.jsx)(o.xP,{mr:2}),"Share"]}),t&&(0,i.jsxs)(l.sN,{onClick:t,children:[(0,i.jsx)(o.Ay,{mr:2}),"Repeat"]}),y&&(0,i.jsxs)(l.sN,{onClick:y,children:[(0,i.jsx)(a.xu,{mr:2,children:w?(0,i.jsx)(d.enf,{}):(0,i.jsx)(d.XiH,{})}),w?"Unbookmark":"Bookmark"]})]})]})]})]}),(0,i.jsx)(g.Z,{nutrition:n.nutrition,border:!1,micro:n.micro}),(0,i.jsxs)(a.kC,{align:"center",flex:"1",mt:"2",mb:"6",children:[(0,i.jsx)(a.xv,{fontSize:"xs",color:"gray.600",fontWeight:"300",children:n.portionWeight===n.totalWeight?"".concat(n.totalWeight,"g"):"".concat(n.portionWeight,"g / ").concat(n.totalWeight,"g")}),(0,i.jsx)(a.xu,{w:"1px",h:"20px",bg:"gray.500",mx:"2"}),(0,i.jsx)(a.xv,{fontSize:"xs",color:"gray.600",fontWeight:"300",children:(0,x.CC)(new Date(n.timestamp))})]}),(0,i.jsx)(c.UO,{in:S,children:(0,i.jsxs)(a.xu,{pl:"4",children:[(0,i.jsx)(v.Z,{size:"sm",item:{name:"Nutritional Value / 100 grams",weight:100,nutrition:(0,f.Q_)(n.nutrition,(function(e,t){return 100*t/n.portionWeight})),micro:Object.fromEntries(Object.entries(n.micro||{}).map((function(e){var t=(0,r.Z)(e,2);return[t[0],100*t[1]/n.portionWeight]})))},bg:"blue.50",rounded:"md"}),n.items.map((function(e,n){return(0,i.jsx)(v.Z,{item:e,size:"sm"},n)}))]})}),(0,i.jsx)(p.Z,{hideWeight:!0,item:{name:n.name,nutrition:n.nutrition,micro:n.micro,weight:100},onClose:M,isOpen:R}),(0,i.jsx)(C,{isOpen:N,onClose:U,meal:n})]})}var S=(0,u.memo)(k)},1976:function(e,n,t){var r=t(6042),i=t(9396),o=t(5893),a=t(8641),s=t(7294),l=t(2780);function c(e){var n=e.micro,t=e.nutrition,s=e.border,c=void 0===s||s,u=e.showLegend,d=void 0===u?!c:u,h=e.transparentBg,m=void 0!==h&&h;return(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)(a.rj,(0,i.Z)((0,r.Z)({gridTemplateColumns:"repeat(4, auto)",zIndex:0,gridGap:c?4:6,bg:m?"transparent":"white"},c?{boxShadow:"md",rounded:"3xl",p:4,px:d&&c?6:4}:{}),{children:l.$I.map((function(e,n){var r=t[e];return(0,o.jsxs)(a.kC,{direction:"column",textTransform:"capitalize",justify:"center",align:"flex-start",children:[(0,o.jsxs)(a.xv,{color:l.MT[e],fontWeight:"600",fontSize:"xs",children:[Number.isInteger(r)?r:r.toFixed(2),l.sw[e]]}),d&&(0,o.jsx)(a.xv,{fontSize:"xs",children:l.S$[e]})]},n)}))})),n&&l.RX.some((function(e){return n[e]}))?(0,o.jsx)("div",{className:c?"-mt-5 flex justify-center gap-4 rounded-b-3xl bg-gray-100 pt-7 pb-2":"-mt-5 flex gap-2 overflow-x-auto pt-7 pb-2",children:l.RX.filter((function(e){return n[e]})).map((function(e,t,r){var i=r.length-1===t,a=n[e];if(a)return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex items-center gap-1 text-xs",children:[(0,o.jsxs)("p",{className:"text-center text-gray-800",children:[a.toFixed(2),"g"]}),(0,o.jsx)("p",{className:"capitalize text-gray-500",children:e})]}),c?null:i?"":"/"]})}))}):null]})}n.Z=(0,s.memo)(c)},7647:function(e,n,t){t.d(n,{T:function(){return l}});var r=t(6042),i=t(9396),o=t(9534),a=t(5893),s=t(8641),l=function(e){var n=e.heading,t=e.children,l=(0,o.Z)(e,["heading","children"]);return(0,a.jsxs)(s.xu,(0,i.Z)((0,r.Z)({py:["2","6","12"],px:["4","16","32"]},l),{children:[n&&"string"===typeof n?(0,a.jsx)(s.X6,{my:"6",children:n}):n,t]}))}},5410:function(e,n,t){function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}t.d(n,{lh:function(){return o},IJ:function(){return a}});var i=t(828);function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"v2";return"v1"===t?m.create(e,n):f.create(e,n)}function a(e){var n=new URLSearchParams,t=!0,r=!1,o=void 0;try{for(var a,s=function(){var e=(0,i.Z)(a.value,2),t=e[0],r=e[1];void 0!==r&&(Array.isArray(r)?r.forEach((function(e){return n.append(t,e)})):n.append(t,r))},l=Object.entries(e)[Symbol.iterator]();!(t=(a=l.next()).done);t=!0)s()}catch(v){r=!0,o=v}finally{try{t||null==l.return||l.return()}finally{if(r)throw o}}var c=n.toString(),u=!0,d=!1,h=void 0;try{for(var m,f=x[Symbol.iterator]();!(u=(m=f.next()).done);u=!0){var p=m.value;if(p.isValid(c))return p.parse(c)}}catch(v){d=!0,h=v}finally{try{u||null==f.return||f.return()}finally{if(d)throw h}}return null}var s=function(){function e(){r(this,e)}return e.reverseMap=function(e){return Object.fromEntries(Object.entries(e).map((function(e){var n=(0,i.Z)(e,2),t=n[0];return[n[1],t]})))},e.createCleanJSON=function(e){return JSON.stringify(e,(function(e,n){return null===n||void 0===n?void 0:n}))},e.compressMeal=function(e){var n=structuredClone(e),t=100/(n.portionWeight||1),r=Object.fromEntries(Object.entries(n.micro||{}).map((function(e){var n=(0,i.Z)(e,2);return[n[0],n[1]*t]})));return n.items=[{name:n.name,nutrition:n.nutrition,micro:r,weight:n.portionWeight}],n.totalWeight=n.portionWeight,n},e.getQueryParam=function(e,n){try{if(e.startsWith("http"))return new URL(e).searchParams.get(n);var t=e.includes("?")?e.split("?")[1]:e;return new URLSearchParams(t).get(n)}catch(r){return null}},e.validateMeal=function(e){if(!e||"object"!==typeof e)throw new Error("Invalid meal data");if(!Array.isArray(e.items)||"number"!==typeof e.totalWeight)throw new Error("Invalid meal data")},e}(),l={calories:"j",carbohydrates:"c",protein:"p",fat:"f",items:"i",nutrition:"n",name:"nm",weight:"w",micro:"m",fiber:"fb",calcium:"ca","saturated fats":"sf",sodium:"na",timestamp:"t",totalWeight:"tw",portionWeight:"pw",icon:"ic"},c=s.reverseMap(l),u=["calorie delta","delta > 20"],d=function(){function e(){r(this,e),this.PARAM="shared_meal"}var n=e.prototype;return n.isValid=function(e){return!!s.getQueryParam(e,this.PARAM)},n.create=function(e,n){var t=this,r=e,i=function(e){return"".concat(n,"meal-entry?").concat(t.PARAM,"=").concat(encodeURIComponent(s.createCleanJSON(e)))},o=i(r);return o.length>=2e3&&(o=i(r=s.compressMeal(e))),o},n.parse=function(e){var n=s.getQueryParam(e,this.PARAM);if(!n)throw new Error("No meal data found in URL");var t=JSON.parse(decodeURIComponent(n));return s.validateMeal(t),t},e}(),h=function(){function e(){r(this,e),this.PARAM="m"}var n=e.prototype;return n.transformKeys=function(e,n,t){var r=this;if(null===e||void 0===e)return e;if(Array.isArray(e))return e.map((function(e){return r.transformKeys(e,n,t)}));if("object"!==typeof e)return e;var o={},a=!0,s=!1,l=void 0;try{for(var c,u=Object.entries(e)[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=(0,i.Z)(c.value,2),h=d[0],m=d[1],f=h.trim();if(!(null===t||void 0===t?void 0:t(f)))o[n[f]||f]=this.transformKeys(m,n,t)}}catch(x){s=!0,l=x}finally{try{a||null==u.return||u.return()}finally{if(s)throw l}}return o},n.isValid=function(e){return!!s.getQueryParam(e,this.PARAM)},n.create=function(e,n){var t=this,r=e,i=function(e){return t.transformKeys(e,l,(function(e){return u.includes(e)}))},o="".concat(n,"meal-entry?").concat(this.PARAM,"=").concat(encodeURIComponent(s.createCleanJSON(i(r))));return o.length>=2e3&&(r=s.compressMeal(e),o="".concat(n,"meal-entry?").concat(this.PARAM,"=").concat(encodeURIComponent(s.createCleanJSON(i(r))))),o},n.parse=function(e){var n=s.getQueryParam(e,this.PARAM);if(!n)throw new Error("No meal data found in URL");var t=JSON.parse(decodeURIComponent(n)),r=this.transformKeys(t,c);return s.validateMeal(r),r},e}(),m=new d,f=new h,x=[f,m]},100:function(e,n,t){function r(e,n){var t=e.currentTarget.closest("[data-".concat(n,"]"));return t?t.dataset[n]:null}function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return new Promise((function(t,r){var i=new FileReader;i.onload=function(e){var n;t(null===(n=e.target)||void 0===n?void 0:n.result)},i.onerror=function(){r(i.error),i.abort()},i.readAsText(e,n)}))}t.d(n,{p:function(){return i},x:function(){return r}})}}]);