(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{8266:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return t(1644)}])},1644:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return _}});var a=t(4924),r=t(828),u=t(5893),i=t(8641),o=t(3234),c=t(979),s=t(9632),l=t(1163),h=t(7294),d=t(7647),m=t(196),f=t(2780),p=t(100),v=t(5385);function _(){var e=(0,f.oR)(),n=e.logs,t=e.dispatch,_=(0,h.useState)(""),x=_[0],E=_[1],j=(0,l.useRouter)();(0,h.useEffect)((function(){var e=new URLSearchParams(location.search).get("search");e&&E(e)}),[]);var w=(0,h.useMemo)((function(){return!x||x.length<3?[]:new s.Z(Object.entries(n).reduce((function(e,n){var t=(0,r.Z)(n,2),a=t[0],u=t[1];return e.concat(u.map((function(e){return{date:a,value:e}})))}),[]),{keys:["value.name","value.items.name"],threshold:.25}).search(x).map((function(e){return e.item})).slice(0,15)}),[x,n]),S=function(e){var n=function(e){var n=(0,p.x)(e,g);if(null===n||void 0===n)throw new Error("This shouldn't have happened.\nCouldn't find proper meal position.");return Number(n)}(e),a=w[n].value;t({type:f.aO.SET_MEAL_ENTRY_ITEMS,payload:{name:a.name,addedItems:a.items,totalWeight:a.totalWeight,portionWeight:a.portionWeight}}),j.push("/meal-entry")};return(0,u.jsxs)(d.T,{heading:"Search Meals",children:[(0,u.jsx)(i.rj,{as:"form",templateColumns:"auto 100px",gap:2,alignItems:"end",onSubmit:function(e){return e.preventDefault()},mb:6,children:(0,u.jsxs)(o.NI,{children:[(0,u.jsx)(o.lX,{htmlFor:"search",children:"Search for meals"}),(0,u.jsx)(c.II,{id:"search",value:x,placeholder:"Search",type:"search",onChange:function(e){E(e.currentTarget.value)}})]})}),w.map((function(e,n){var t;return(0,u.jsxs)(i.xu,(t={my:2},(0,a.Z)(t,"data-".concat(g),n),(0,a.Z)(t,"children",[(0,u.jsx)(i.X6,{size:"lg",my:2,children:(0,v.$x)(e.date)}),(0,u.jsx)(m.Z,{meal:e.value,onRepeat:S})]),t),n)}))]})}_.pageTitle="Search";var g="mealindex"}},function(e){e.O(0,[13,268,826,679,221,723,774,888,179],(function(){return n=8266,e(e.s=n);var n}));var n=e.O();_N_E=n}]);