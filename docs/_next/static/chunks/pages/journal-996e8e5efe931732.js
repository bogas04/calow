(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[564],{7741:function(e,n,t){"use strict";t.d(n,{hU:function(){return g},zx:function(){return p}});var r=t(7294),i=t(6734),o=t(6256),a=t(4520),s=t(8387),l=t(5610),c=(...e)=>e.filter(Boolean).join(" "),u=e=>e?"":void 0,[d,m]=(0,s.k)({strict:!1,name:"ButtonGroupContext"});function f(e){const{children:n,className:t,...i}=e,a=(0,r.isValidElement)(n)?(0,r.cloneElement)(n,{"aria-hidden":!0,focusable:!1}):n,s=c("chakra-button__icon",t);return r.createElement(o.m$.span,{display:"inline-flex",alignSelf:"center",flexShrink:0,...i,className:s},a)}function x(e){const{label:n,placement:t,spacing:i="0.5rem",children:a=r.createElement(l.$,{color:"currentColor",width:"1em",height:"1em"}),className:s,__css:u,...d}=e,m=c("chakra-button__spinner",s),f="start"===t?"marginEnd":"marginStart",x=(0,r.useMemo)((()=>({display:"flex",alignItems:"center",position:n?"relative":"absolute",[f]:n?i:0,fontSize:"1em",lineHeight:"normal",...u})),[u,n,f,i]);return r.createElement(o.m$.div,{className:m,...d,__css:x},a)}f.displayName="ButtonIcon",x.displayName="ButtonSpinner";var p=(0,o.Gp)(((e,n)=>{const t=m(),s=(0,o.mq)("Button",{...t,...e}),{isDisabled:l=(null==t?void 0:t.isDisabled),isLoading:d,isActive:f,children:p,leftIcon:g,rightIcon:v,loadingText:b,iconSpacing:j="0.5rem",type:y,spinner:w,spinnerPlacement:N="start",className:_,as:E,...S}=(0,a.Lr)(e),k=(0,r.useMemo)((()=>{const e={...null==s?void 0:s._focus,zIndex:1};return{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none",...s,...!!t&&{_focus:e}}}),[s,t]),{ref:z,type:C}=function(e){const[n,t]=(0,r.useState)(!e);return{ref:(0,r.useCallback)((e=>{e&&t("BUTTON"===e.tagName)}),[]),type:n?"button":void 0}}(E),T={rightIcon:v,leftIcon:g,iconSpacing:j,children:p};return r.createElement(o.m$.button,{disabled:l||d,ref:(0,i.qq)(n,z),as:E,type:y??C,"data-active":u(f),"data-loading":u(d),__css:k,className:c("chakra-button",_),...S},d&&"start"===N&&r.createElement(x,{className:"chakra-button__spinner--start",label:b,placement:"start",spacing:j},w),d?b||r.createElement(o.m$.span,{opacity:0},r.createElement(h,{...T})):r.createElement(h,{...T}),d&&"end"===N&&r.createElement(x,{className:"chakra-button__spinner--end",label:b,placement:"end",spacing:j},w))}));function h(e){const{leftIcon:n,rightIcon:t,children:i,iconSpacing:o}=e;return r.createElement(r.Fragment,null,n&&r.createElement(f,{marginEnd:o},n),i,t&&r.createElement(f,{marginStart:o},t))}p.displayName="Button",(0,o.Gp)((function(e,n){const{size:t,colorScheme:i,variant:a,className:s,spacing:l="0.5rem",isAttached:u,isDisabled:m,...f}=e,x=c("chakra-button__group",s),p=(0,r.useMemo)((()=>({size:t,colorScheme:i,variant:a,isDisabled:m})),[t,i,a,m]);let h={display:"inline-flex"};return h=u?{...h,"> *:first-of-type:not(:last-of-type)":{borderEndRadius:0},"> *:not(:first-of-type):not(:last-of-type)":{borderRadius:0},"> *:not(:first-of-type):last-of-type":{borderStartRadius:0}}:{...h,"& > *:not(style) ~ *:not(style)":{marginStart:l}},r.createElement(d,{value:p},r.createElement(o.m$.div,{ref:n,role:"group",__css:h,className:x,"data-attached":u?"":void 0,...f}))})).displayName="ButtonGroup";var g=(0,o.Gp)(((e,n)=>{const{icon:t,children:i,isRound:o,"aria-label":a,...s}=e,l=t||i,c=(0,r.isValidElement)(l)?(0,r.cloneElement)(l,{"aria-hidden":!0,focusable:!1}):null;return r.createElement(p,{padding:"0",borderRadius:o?"full":void 0,ref:n,"aria-label":a,...s},c)}));g.displayName="IconButton"},6734:function(e,n,t){"use strict";t.d(n,{lq:function(){return i},qq:function(){return o}});var r=t(7294);function i(...e){return n=>{e.forEach((e=>{!function(e,n){if(null!=e)if("function"!==typeof e)try{e.current=n}catch(t){throw new Error(`Cannot assign value '${n}' to ref '${e}'`)}else e(n)}(e,n)}))}}function o(...e){return(0,r.useMemo)((()=>i(...e)),e)}},1197:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/journal",function(){return t(1203)}])},1976:function(e,n,t){"use strict";var r=t(6042),i=t(9396),o=t(5893),a=t(8641),s=t(7294),l=t(2780);function c(e){var n=e.micro,t=e.nutrition,s=e.border,c=void 0===s||s,u=e.showLegend,d=void 0===u?!c:u,m=e.transparentBg,f=void 0!==m&&m,x=e.round,p=void 0===x||x;return(0,o.jsxs)("div",{className:"flex flex-col min-w-[220px]",children:[(0,o.jsx)(a.rj,(0,i.Z)((0,r.Z)({gridTemplateColumns:"repeat(4, auto)",zIndex:0,gridGap:c?4:6,bg:f?"transparent":"white"},c?{boxShadow:"md",rounded:"3xl",p:4,px:d&&c?6:4}:{}),{children:l.$I.map((function(e,n){var r=t[e];return(0,o.jsxs)(a.kC,{direction:"column",textTransform:"capitalize",justify:"center",align:"flex-start",children:[(0,o.jsxs)("p",{className:"font-bold text-md",style:{color:l.MT[e]},children:[Number.isInteger(r)?r:r.toFixed(p?0:2),l.sw[e]]}),d&&(0,o.jsx)(a.xv,{fontSize:"sm",children:l.S$[e]})]},n)}))})),n&&l.RX.some((function(e){return n[e]}))?(0,o.jsx)("div",{className:c?"-mt-5 flex justify-center gap-4 rounded-b-3xl bg-gray-100 pt-7 pb-2":"-mt-5 flex gap-2 overflow-x-auto pt-7 pb-2",children:l.RX.filter((function(e){return n[e]})).map((function(e,t,r){var i=r.length-1===t,a=n[e];if(a)return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex items-center gap-1 text-sm font-semibold",children:[(0,o.jsxs)("p",{className:"text-center text-gray-800",children:[a.toFixed(p?0:2),"g"]}),(0,o.jsx)("p",{className:"capitalize text-gray-500",children:e})]}),c?null:i?"":"/"]})}))}):null]})}n.Z=(0,s.memo)(c)},7647:function(e,n,t){"use strict";t.d(n,{T:function(){return l}});var r=t(6042),i=t(9396),o=t(9534),a=t(5893),s=t(8641),l=function(e){var n=e.heading,t=e.children,l=(0,o.Z)(e,["heading","children"]);return(0,a.jsxs)(s.xu,(0,i.Z)((0,r.Z)({py:["2","6","12"],px:["4","16","32"]},l),{children:[n&&"string"===typeof n?(0,a.jsx)(s.X6,{my:"6",children:n}):n,t]}))}},1203:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return h}});var r=t(6042),i=t(9815),o=t(5893),a=t(8641),s=t(7741),l=t(1664),c=t.n(l),u=t(7294),d=t(7647),m=t(1976),f=t(2780),x=t(3437),p=t(5385);function h(){var e=(0,f.oR)(),n=e.logs,t=e.goal,l=(0,u.useState)("calories"),h=l[0],v=l[1],b=(0,u.useReducer)((function(e,n){return{next:function(){var n=new Date(e.getTime());return n.setDate(e.getDate()+7),n},previous:function(){var n=new Date(e.getTime());return n.setDate(e.getDate()-7),n}}[n]()}),new Date),j=b[0],y=b[1],w=(0,u.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7;return(0,i.Z)(Array(n).keys()).map((function(n){var t=new Date(e.getTime());return t.setDate(t.getDate()-n),(0,p.iZ)(t.getTime())})).reverse()}(j)}),[j]),N=(0,u.useMemo)((function(){return w.map((function(e){return{nutrition:(0,x.bZ)(n[e]||[]),micro:(0,x.$j)(n[e]||[]),dateKey:e}}))}),[n,w]),_=(0,u.useMemo)((function(){return N.reduce((function(e,n){return(0,r.Z)({},(0,x.Q_)(e,(function(e,r){return(r+(n.nutrition[e]||t.nutrition[e]))/2})),Object.fromEntries(f.RX.map((function(t){return[t,(((null===e||void 0===e?void 0:e[t])||0)+n.micro[t])/2]}))))}),(0,x.GV)((function(){return 0})))}),[t.nutrition,N]),E=(0,u.useMemo)((function(){return w.flatMap((function(e){return n[e]||[]})).sort((function(e,n){var t,r;return f.RX.includes(h)?((null===(t=n.micro)||void 0===t?void 0:t[h])||0)-((null===(r=e.micro)||void 0===r?void 0:r[h])||0):n.nutrition[h]-e.nutrition[h]})).slice(0,5)}),[w,n,h]);return(0,o.jsxs)(d.T,{heading:"Journal",children:[(0,o.jsxs)(a.kC,{flexDir:"column",gap:2,children:[(0,o.jsx)(a.kC,{rounded:"xl",bg:"gray.100",px:"4",py:"2",gap:2,align:"center",children:_.calories<t.nutrition.calories?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.xv,{fontSize:"32",display:"inline",children:"\ud83c\udfc6"}),(0,o.jsx)(a.xv,{children:"Congrats! You've been hitting your goals."})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.xv,{fontSize:"32",display:"inline",children:"\ud83d\udcaa"}),(0,o.jsx)(a.xv,{children:"Don't worry, keep trying, you'll get there."})]})}),(0,o.jsxs)("div",{className:"my-4 grid gap-2",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm font-semibold",children:"Weekly Average"}),(0,o.jsx)(m.Z,{nutrition:_,showLegend:!0,border:!1,micro:Object.fromEntries(f.RX.map((function(e){return[e,_[e]]})))})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm font-semibold",children:"Goal"}),(0,o.jsx)(m.Z,{nutrition:t.nutrition,showLegend:!0,border:!1,micro:f.ff})]})]})]}),(0,o.jsxs)(a.xu,{position:"relative",flex:1,mt:"12",pl:"2",bg:"gray.50",children:[(0,o.jsxs)(a.xu,{position:"absolute",top:0,zIndex:999,w:"100%",children:[(0,o.jsx)(a.xu,{w:"100%",borderBottom:"dotted",h:"2",borderColor:f.MT[h],mt:-2}),(0,o.jsxs)(a.xv,{textAlign:"right",fontSize:"9",children:[t.nutrition[h]," ",f.sw[h]]})]}),(0,o.jsx)(g,{macrosForLogs:N,selectedMacro:h,goal:t})]}),(0,o.jsxs)("div",{className:"mt-12 flex justify-between",children:[(0,o.jsx)(s.zx,{variant:"outline",onClick:function(){return y("previous")},children:"Previous Week"}),(0,o.jsx)(s.zx,{variant:"outline",onClick:function(){return y("next")},children:"Next Week"})]}),(0,o.jsx)("div",{className:"mt-8 mb-4 flex justify-between gap-2 overflow-x-auto",children:f.$I.concat(f.RX).map((function(e){return(0,o.jsx)(s.zx,{flexShrink:0,onClick:function(){return v(e)},variant:e===h?"solid":"outline",size:"sm",children:e},e)}))}),(0,o.jsxs)(a.xu,{children:[(0,o.jsxs)(a.kC,{gap:"1",children:[(0,o.jsx)(a.xv,{fontSize:"16",fontWeight:"bold",children:"Meals with most amount of"}),(0,o.jsx)(a.xv,{fontWeight:"bold",fontSize:"16",display:"inline",textTransform:"capitalize",color:f.MT[h],children:h})]}),E.map((function(e,n){var t=(0,p.iZ)(e.timestamp),r=new Date(e.timestamp);return(0,o.jsx)(c(),{href:"/?date=".concat(t),children:(0,o.jsxs)(a.xu,{my:"4",children:[(0,o.jsxs)(a.kC,{justify:"space-between",children:[(0,o.jsx)(a.xv,{fontWeight:"semibold",fontSize:14,flex:"1",children:e.name}),(0,o.jsxs)(a.xv,{fontSize:"10",color:"gray.600",align:"right",children:[(0,p.CC)(r),", ",(0,p.a3)(r)]})]}),(0,o.jsx)(m.Z,{nutrition:e.nutrition,micro:e.micro,showLegend:!0,border:!1})]})},n)}))]})]})}h.pageTitle="Journal";var g=(0,u.memo)((function(e){var n=e.macrosForLogs,t=e.goal,r=e.selectedMacro;return(0,o.jsx)(a.kC,{justify:"space-between",align:"flex-end",height:200,width:"95%",children:n.map((function(e){var n=e.nutrition,i=e.micro,s=e.dateKey,l=n[r]/t.nutrition[r];f.RX.includes(r)&&(l=i[r]/f.ff[r]);var u,d=(0,p._x)(s),m=!!d&&(0,p.iZ)(d.getTime())===(0,p.iZ)(Date.now()),x=d?(0,p.a3)(d):null;return(0,o.jsx)(c(),{href:"/?date=".concat(s),children:(0,o.jsxs)(a.xu,{display:"flex",alignItems:"flex-end",justifyContent:"space-between",w:"100%",position:"relative",children:[(0,o.jsx)(a.xu,{bg:null!==(u=f.MT[r])&&void 0!==u?u:"brown",w:"3",h:Math.min(200*l,250)},s),x?(0,o.jsx)(a.xv,{fontSize:"xs",position:"absolute",bottom:-5,left:-2,fontWeight:m?"bold":void 0,children:x}):null]})},s)}))})}))},9534:function(e,n,t){"use strict";function r(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}t.d(n,{Z:function(){return r}})}},function(e){e.O(0,[774,888,179],(function(){return n=1197,e(e.s=n);var n}));var n=e.O();_N_E=n}]);