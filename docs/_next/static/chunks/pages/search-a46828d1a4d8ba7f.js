(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{8266:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return t(1644)}])},1644:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return _}});var r=t(4924),a=t(828),u=t(5893),i=t(8641),o=t(3234),c=t(979),s=t(9632),l=t(1163),h=t(7294),d=t(7647),f=t(196),m=t(2780),p=t(100),v=t(5385);function _(){var e=(0,m.oR)(),n=e.logs,t=e.dispatch,_=(0,h.useState)(""),x=_[0],w=_[1],E=(0,l.useRouter)();(0,h.useEffect)((function(){var e=new URLSearchParams(location.search).get("search");e&&w(e)}),[]);var j=(0,h.useMemo)((function(){return!x||x.length<3?[]:new s.Z(Object.entries(n).reduce((function(e,n){var t=(0,a.Z)(n,2),r=t[0],u=t[1];return e.concat(u.map((function(e){return{date:r,value:e}})))}),[]),{keys:["value.name","value.items.name"],threshold:.25}).search(x).map((function(e){return e.item})).sort((function(e,n){return(0,v.rm)(!1)(e.date,n.date)})).slice(0,15)}),[x,n]),S=function(e){var n=function(e){var n=(0,p.x)(e,g);if(null===n||void 0===n)throw new Error("This shouldn't have happened.\nCouldn't find proper meal position.");return Number(n)}(e),r=j[n].value;t({type:m.aO.SET_MEAL_ENTRY_ITEMS,payload:{name:r.name,addedItems:r.items,totalWeight:r.totalWeight,portionWeight:r.portionWeight}}),E.push("/meal-entry")};return(0,u.jsxs)(d.T,{heading:"Search Meals",children:[(0,u.jsx)(i.rj,{as:"form",templateColumns:"auto",gap:2,alignItems:"end",onSubmit:function(e){return e.preventDefault()},mb:6,children:(0,u.jsxs)(o.NI,{width:"full",children:[(0,u.jsx)(o.lX,{htmlFor:"search",children:"Search for meals"}),(0,u.jsx)(c.II,{id:"search",value:x,placeholder:"Search",type:"search",onChange:function(e){w(e.currentTarget.value)}})]})}),j.map((function(e,n){var t;return(0,u.jsxs)(i.xu,(t={my:2},(0,r.Z)(t,"data-".concat(g),n),(0,r.Z)(t,"children",[(0,u.jsx)(i.X6,{size:"lg",my:2,children:(0,v.$x)(e.date)}),(0,u.jsx)(f.Z,{meal:e.value,onRepeat:S})]),t),n)}))]})}_.pageTitle="Search";var g="mealindex"}},function(e){e.O(0,[13,955,268,826,679,221,208,380,774,888,179],(function(){return n=8266,e(e.s=n);var n}));var n=e.O();_N_E=n}]);