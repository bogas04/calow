(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{9525:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var n=r(6265),a=r(5893),o=r(4121),c=r(9345),u=r(6729),i=r(6618),s=r(9887),l=r(8017),h=r(336),p=r(4221),f=r(1163),d=r(7294),m=r(9868),v=r(7664),g=r(6084),O=r(8394),b=r(6154);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(){var e=(0,g.useStore)(),t=e.logs,r=e.dispatch,j=(0,d.useState)(""),w=j[0],x=j[1],E=(0,f.useRouter)();(0,d.useEffect)((function(){var e=new URLSearchParams(location.search).get("search");e&&x(e)}),[]);var S=(0,d.useMemo)((function(){return!w||w.length<3?[]:new p.Z(Object.entries(t).reduce((function(e,t){var r=(0,o.Z)(t,2),n=r[0],a=r[1];return e.concat(a.map((function(e){return{date:n,value:e}})))}),[]),{keys:["value.name","value.items.name"],threshold:.25}).search(w).map((function(e){return e.item})).slice(0,15)}),[w,t]),P=function(e){var t=function(e){var t=(0,O.x)(e,_);if(null===t||void 0===t)throw new Error("This shouldn't have happened.\nCouldn't find proper meal position.");return Number(t)}(e),n=S[t].value;r({type:g.ACTIONS.SET_MEAL_ENTRY_ITEMS,payload:{name:n.name,addedItems:n.items,totalWeight:n.totalWeight,portionWeight:n.portionWeight}}),E.push("/meal-entry")};return(0,a.jsxs)(m.T,{heading:"Search Meals",children:[(0,a.jsx)(c.r,{as:"form",templateColumns:"auto 100px",gap:2,alignItems:"end",onSubmit:function(e){return e.preventDefault()},mb:6,children:(0,a.jsxs)(u.NI,{children:[(0,a.jsx)(i.l,{htmlFor:"search",children:"Search for meals"}),(0,a.jsx)(s.I,{id:"search",value:w,placeholder:"Search",type:"search",onChange:function(e){x(e.currentTarget.value)}})]})}),S.map((function(e,t){return(0,a.jsxs)(l.xu,y(y({my:2},(0,n.Z)({},"data-".concat(_),t)),{},{children:[(0,a.jsx)(h.X,{size:"lg",my:2,children:(0,b.$x)(e.date)}),(0,a.jsx)(v.Z,{meal:e.value,onRepeat:P})]}),t)}))]})}w.pageTitle="Search";var _="mealindex"},881:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return r(9525)}])}},function(e){e.O(0,[774,13,511,753,962,446,76,888,179],(function(){return t=881,e(e.s=t);var t}));var t=e.O();_N_E=t}]);