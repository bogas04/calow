(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[664],{2003:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/bookmarks",function(){return n(3264)}])},3264:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return R}});var r=n(4924),i=n(5893),l=n(8641),a=n(3234),s=n(979),o=n(7294),u=n(7647),c=n(196),h=n(2780),f=n(100),g=n(1163);const p=new Intl.Collator("en").compare,d=1/0,m={interSplit:"[^A-Za-z0-9]+",intraSplit:"[a-z][A-Z]",intraBound:"[A-Za-z][0-9]|[0-9][A-Za-z]|[a-z][A-Z]",interLft:0,interRgt:0,interChars:".",interIns:d,intraChars:"[a-z\\d]",intraIns:0,intraMode:0,intraSlice:[1,d],intraSub:0,intraTrn:0,intraDel:0,intraFilt:(e,t,n)=>!0,sort:(e,t,n)=>{let{idx:r,chars:i,terms:l,interLft2:a,interLft1:s,start:o,intraIns:u,interIns:c}=e;return r.map(((e,t)=>t)).sort(((e,n)=>i[n]-i[e]||u[e]-u[n]||l[n]+a[n]+.5*s[n]-(l[e]+a[e]+.5*s[e])||c[e]-c[n]||o[e]-o[n]||p(t[r[e]],t[r[n]])))}},x=(e,t)=>0==t?"":1==t?e+"??":t==d?e+"*?":e+`{0,${t}}?`,k="(?:\\b|_)";function b(e){e=Object.assign({},m,e);const{interLft:t,interRgt:n,intraMode:r,intraSlice:i,intraIns:l,intraSub:a,intraTrn:s,intraDel:o,intraSplit:u,interSplit:c,intraBound:h,intraChars:f}=e;let{intraRules:g}=e;null==g&&(g=e=>{let t=m.intraSlice,n=0,r=0,u=0,c=0,h=e.length;return h<=4?h>=3&&(u=1,4==h&&(n=1)):(t=i,n=l,r=a,u=s,c=o),{intraSlice:t,intraIns:n,intraSub:r,intraTrn:u,intraDel:c}});let p=!!u,d=new RegExp(u,"g"),b=new RegExp(c,"g"),E=new RegExp("^"+c+"|"+c+"$","g");const w=e=>(e=e.replace(E,""),p&&(e=e.replace(d,(e=>e[0]+" "+e[1]))),e.split(b)),I=(i,a=0)=>{let s,o=w(i);if(1==r)s=o.map((e=>{let{intraSlice:t,intraIns:n,intraSub:r,intraTrn:i,intraDel:l}=g(e);if(n+r+i+l==0)return e;let[a,s]=t,o=e.slice(0,a),u=e.slice(s),c=e.slice(a,s),h=c.length,p=[];if(r)for(let g=0;g<h;g++)p.push(o+c.slice(0,g)+f+c.slice(g+1)+u);if(i)for(let f=0;f<h-1;f++)c[f]!=c[f+1]&&p.push(o+c.slice(0,f)+c[f+1]+c[f]+c.slice(f+2)+u);if(l)for(let f=0;f<h;f++)p.push(o+c.slice(0,f+1)+"?"+c.slice(f+1)+u);if(n){let e=x(f,1);for(let t=0;t<h+1;t++)p.push(o+c.slice(0,t)+e+c.slice(t)+u)}return"(?:"+e+"|"+p.join("|")+")"}));else{let e=x(f,l);2==a&&l>0&&(e=")("+e+")("),s=o.map((t=>t.split("").join(e)))}let u=2==t?k:"",c=2==n?k:"",h=c+x(e.interChars,e.interIns)+u;return s=a>0?"("+s.join(")("+h+")(")+")":s.join(h),s=a>0?2==t?"("+u+")"+s+"("+c+")":"(.?)"+s+"(.?)":u+s+c,[new RegExp(s,"i"),o]};let R=!!h,S=new RegExp(c),_=new RegExp(h);return{split:w,filter:(e,t,n)=>{let r=[],[i]=I(t);if(null!=n)for(let l=0;l<n.length;l++){let t=n[l];i.test(e[t])&&r.push(t)}else for(let l=0;l<e.length;l++)i.test(e[l])&&r.push(l);return r},info:(r,i,a)=>{let[s,o]=I(a,1),[u]=I(a,2),c=r.length,h=Array(c).fill(0),f={idx:Array(c),start:h.slice(),chars:h.slice(),terms:h.slice(),interIns:h.slice(),intraIns:h.slice(),interLft2:h.slice(),interRgt2:h.slice(),interLft1:h.slice(),interRgt1:h.slice(),ranges:Array(c)},g=1==t||1==n,p=0;for(let d=0;d<r.length;d++){let a=i[r[d]],c=a.match(s),h=c.index+c[1].length,m=h,x=!1,k=0,b=0,E=0,w=0,I=0,v=0,j=0,A=0;for(let r=0,i=2;r<o.length;r++,i+=2){let s=c[i].toLowerCase(),u=s==o[r];if(!u&&l>0){let e=s.indexOf(o[r]);e>-1&&(u=!0,m+=e,c[i]=c[i].slice(e),0==r&&(h=m))}if(g||u){let e=m-1,l=m+c[i].length,s=!0,h=!0;if(-1==e||S.test(a[e]))u&&k++;else{if(2==t){x=!0;break}if(R&&_.test(a[e]+a[e+1]))u&&b++;else{if(1==t){x=!0;break}s=!1}}if(l==a.length||S.test(a[l]))u&&E++;else{if(2==n){x=!0;break}if(R&&_.test(a[l-1]+a[l]))u&&w++;else{if(1==n){x=!0;break}h=!1}}u&&(I+=o[r].length,s&&h&&v++)}else A+=s.length-o[r].length;if(r>0&&(j+=c[i-1].length),!e.intraFilt(o[r],s,m)){x=!0;break}r<o.length-1&&(m+=c[i].length+c[i+1].length)}if(!x){f.idx[p]=r[d],f.interLft2[p]=k,f.interLft1[p]=b,f.interRgt2[p]=E,f.interRgt1[p]=w,f.chars[p]=I,f.terms[p]=v,f.interIns[p]=j,f.intraIns[p]=A,f.start[p]=h;let e=a.match(u),t=f.ranges[p]=[],n=e.index+e[1].length,i=n,l=n;for(let r=2;r<e.length;r++){let a=e[r].length;n+=a,r%2==0?l=n:a>0&&(t.push(i,l),i=l=n)}l>i&&t.push(i,l),p++}}if(p<r.length)for(let e in f)f[e]=f[e].slice(0,p);return f},sort:e.sort}}const E=(()=>{let e={A:"\xc1\xc0\xc3\xc2\xc4\u0104",a:"\xe1\xe0\xe3\xe2\xe4\u0105",E:"\xc9\xc8\xca\xcb\u0116",e:"\xe9\xe8\xea\xeb\u0119",I:"\xcd\xcc\xce\xcf\u012e",i:"\xed\xec\xee\xef\u012f",O:"\xd3\xd2\xd4\xd5\xd6",o:"\xf3\xf2\xf4\xf5\xf6",U:"\xda\xd9\xdb\xdc\u016a\u0172",u:"\xfa\xf9\xfb\xfc\u016b\u0173",C:"\xc7\u010c",c:"\xe7\u010d",N:"\xd1",n:"\xf1",S:"\u0160",s:"\u0161"},t=new Map,n="";for(let i in e)e[i].split("").forEach((e=>{n+=e,t.set(e,i)}));let r=new RegExp(`[${n}]`,"g");return e=>{let n=Array(e.length);for(let i=0;i<e.length;i++)n[i]=e[i].replace(r,(e=>t.get(e)));return n}})();const w=(e,t)=>t?`<mark>${e}</mark>`:e,I=(e,t)=>e+t;function R(){var e=(0,o.useState)(""),t=e[0],n=e[1],f=(0,h.oR)(),p=f.logs,d=f.dispatch,m=f.bookmarks,x=(0,g.useRouter)(),k=function(e){var t=_(e),n=w[t],r=n.date,i=n.index;d({type:h.aO.REMOVE_BOOKMARK,payload:{date:r,index:i}})},E=function(e){var t=_(e),n=w[t].meal;d({type:h.aO.SET_MEAL_ENTRY_ITEMS,payload:{name:n.name,addedItems:n.items,totalWeight:n.totalWeight,portionWeight:n.portionWeight}}),x.push("/meal-entry")},w=(0,o.useMemo)((function(){var e=m.map((function(e){return{date:e.date,index:e.index,meal:p[e.date][e.index]}}));return""===t.trim()?e:(new b).filter(e.map((function(e){return e.meal.name})),t.trim()).map((function(t){return e[t]}))}),[m,t,p]);return(0,i.jsxs)(u.T,{heading:"Your Bookmarks",children:[(0,i.jsx)(l.rj,{as:"form",templateColumns:"auto",gap:2,alignItems:"end",onSubmit:function(e){return e.preventDefault()},children:(0,i.jsxs)(a.NI,{children:[(0,i.jsx)(a.lX,{htmlFor:"search",children:"Search bookmarks"}),(0,i.jsx)(s.II,{id:"search",value:t,placeholder:"Search",type:"search",onChange:function(e){n(e.currentTarget.value)}})]})}),(0,i.jsx)(l.xu,{mt:"4",children:w.map((function(e,t){var n,a=e.meal,s=(e.index,e.date);return(0,i.jsx)(l.xu,(n={},(0,r.Z)(n,"data-".concat(S),t),(0,r.Z)(n,"children",(0,i.jsx)(c.Z,{meal:a,onRepeat:E,onBookmark:k,bookmarked:!0})),n),"".concat(s,"-").concat(t))}))})]})}b.latinize=E,b.permute=e=>{let t=function(e){let t,n,r=e.length,i=[e.slice()],l=new Array(r).fill(0),a=1;for(;a<r;)l[a]<a?(t=a%2&&l[a],n=e[a],e[a]=e[t],e[t]=n,++l[a],a=1,i.push(e.slice())):(l[a]=0,++a);return i}([...Array(e.length).keys()]).sort(((e,t)=>{for(let n=0;n<e.length;n++)if(e[n]!=t[n])return e[n]-t[n];return 0}));return t.map((t=>t.map((t=>e[t]))))},b.highlight=function(e,t,n=w,r="",i=I){r=i(r,n(e.substring(0,t[0]),!1))??r;for(let l=0;l<t.length;l+=2){let a=t[l],s=t[l+1];r=i(r,n(e.substring(a,s),!0))??r,l<t.length-3&&(r=i(r,n(e.substring(t[l+1],t[l+2]),!1))??r)}return r=i(r,n(e.substring(t[t.length-1]),!1))??r},R.pageTitle="Bookmarks";var S="mealindex";function _(e){var t=(0,f.x)(e,S);if(null===t||void 0===t)throw new Error("This shouldn't have happened.\nCouldn't find proper meal position.");return Number(t)}}},function(e){e.O(0,[13,955,268,826,679,982,380,774,888,179],(function(){return t=2003,e(e.s=t);var t}));var t=e.O();_N_E=t}]);