"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[380],{4175:function(e,n,i){var t=i(828),r=i(5893),o=i(3826),s=i(8641),l=i(7741),a=i(5868),c=i(7294),u=i(1976);function d(e){var n,i,c=e.item,d=e.isOpen,h=e.hideWeight,x=void 0!==h&&h,m=e.onClose,j=0!==Object.keys(null!==(n=c.micro)&&void 0!==n?n:{}).length;return(0,r.jsxs)(o.u_,{isOpen:d,onClose:m,size:"full",scrollBehavior:"inside",children:[(0,r.jsx)(o.ZA,{}),(0,r.jsxs)(o.hz,{pb:5,children:[(0,r.jsx)(o.xB,{children:(0,r.jsxs)(s.kC,{align:"center",justify:"space-between",children:[c.name," ",x?"":"(".concat(c.weight,"g)"),(0,r.jsx)(l.hU,{"aria-label":"close",rounded:"full",icon:(0,r.jsx)(a.P,{}),variant:"ghost",onClick:m})]})}),(0,r.jsxs)(o.fe,{children:[(0,r.jsx)(u.Z,{nutrition:c.nutrition,border:!1}),j&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.xv,{size:"lg",fontWeight:"600",mt:"5",mb:"2",children:"Micro Nutrients (in grams):"}),Object.entries(null!==(i=c.micro)&&void 0!==i?i:{}).map((function(e){var n=(0,t.Z)(e,2),i=n[0],o=n[1];return(0,r.jsxs)(s.kC,{justify:"space-between",align:"center",my:"1",children:[(0,r.jsx)(s.xv,{textTransform:"capitalize",fontWeight:"400",children:i}),(0,r.jsx)(s.xv,{children:Number(o*c.weight/100).toFixed(2)})]},i)}))]})]})]})]})}n.Z=(0,c.memo)(d)},6917:function(e,n,i){var t=i(6042),r=i(9396),o=i(9534),s=i(5893),l=i(1664),a=i.n(l),c=i(8641),u=i(7741),d=i(7294),h=i(1976),x=i(3750),m=i(4175);function j(e){var n=e.item,i=e.size,l=void 0===i?"lg":i,j=(0,o.Z)(e,["item","size"]),g=(0,d.useState)(!1),f=g[0],v=g[1];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(c.xu,(0,r.Z)((0,t.Z)({borderWidth:"1px",borderStyle:"solid",borderColor:"gray.200",borderRadius:8,my:"sm"===l?3:5,p:"sm"===l?3:5},j),{children:[(0,s.jsx)(c.kC,{mb:"sm"===l?2:4,justify:"space-between",children:(0,s.jsx)(c.X6,{size:"sm"===l?"sm":"md",children:(0,s.jsx)(a(),{href:"/items?search=".concat(n.name),children:(0,s.jsxs)("a",{children:[(0,s.jsx)(c.xu,{as:"span",mx:"sm"===l?0:2,children:n.icon||"\ud83c\udf5b"})," ",n.name]})})})}),(0,s.jsxs)(c.kC,{justify:"space-between",align:"flex-start",children:[(0,s.jsx)(h.Z,{border:!1,nutrition:n.nutrition,transparentBg:!0,micro:n.micro}),n.micro&&(0,s.jsx)(u.hU,{variant:"ghost",rounded:"full",color:"gray.500",icon:(0,s.jsx)(x.evw,{}),"aria-label":"Micronutrients",onClick:function(){return v(!0)}})]}),(0,s.jsxs)(c.xv,{mt:"2",fontSize:"xs",color:"gray.600",fontWeight:"300",children:[n.weight,"g"]})]})),(0,s.jsx)(m.Z,{item:n,onClose:function(){return v(!1)},isOpen:f})]})}n.Z=(0,d.memo)(j)},196:function(e,n,i){i.d(n,{Z:function(){return S}});var t=i(828),r=i(5893),o=i(3382),s=i(8641),l=i(7741),a=i(5679),c=i(1197),u=i(7294),d=i(7516),h=i(3750),x=i(471),m=i(3437),j=i(5385),g=i(4175),f=i(6917),v=i(1976),p=i(4221),b=i(3826),w=i(8561),k=i(3234),C=i(979),y=i(7608),W=(0,u.memo)((function(e){var n,i,t=e.isOpen,a=e.onClose,c=e.meal,d=(0,p.pm)(),h=(0,u.useState)("v3"),x=h[0],m=h[1],j=(0,u.useMemo)((function(){var e;if(!t)return"";c.name,Date.now(),c.items,c.totalWeight,c.portionWeight,c.nutrition,c.micro,c.water;var n=(null===(e=document.querySelector('meta[property="og:url"'))||void 0===e?void 0:e.getAttribute("content"))||"https://bogas04.github.io/calow/";return(0,y.lh)(c,n,x)}),[t,c,x]),g=(0,u.useCallback)((function(){var e,n,i=function(){return d({title:"Oops!",description:"We couldn't share the link at this moment",status:"error",duration:5e3,isClosable:!0})};(null===window||void 0===window||null===(e=window.navigator)||void 0===e||null===(n=e.share)||void 0===n?void 0:n.call(e,{title:c.name,url:j}).catch((function(){i()})))||i()}),[j,c.name,d]),f=(0,u.useCallback)((function(){window.navigator.clipboard.writeText(j).then((function(){d({title:"Copied!",description:"The shareable link is now in your clipboard",status:"success",duration:5e3,isClosable:!0})})).catch((function(){d({title:"Opps!",description:"We couldn't copy the link to your clipboard",status:"error",duration:5e3,isClosable:!0})}))}),[j,d]),v=(null===window||void 0===window||null===(n=window.navigator)||void 0===n||null===(i=n.canShare)||void 0===i?void 0:i.call(n))||"function"===typeof(null===window||void 0===window?void 0:window.navigator.share);return(0,r.jsxs)(b.u_,{isOpen:t,onClose:a,isCentered:!0,scrollBehavior:"outside",motionPreset:"slideInBottom",children:[(0,r.jsx)(b.ZA,{height:"100vh"}),(0,r.jsxs)(b.hz,{position:"fixed",bottom:"0px",mb:"0",borderRadius:"1.75rem 1.75rem 0px 0px",minW:["100vw","lg"],children:[(0,r.jsx)(b.xB,{mt:"2",children:"Share Meal"}),(0,r.jsx)(b.ol,{mt:"2"}),(0,r.jsxs)(b.fe,{pb:"5",children:[(0,r.jsx)(s.xv,{children:"Here's a link you can share with your buddy who wants to add this meal to their log."}),(0,r.jsxs)(w.Ee,{onChange:function(e){return m(e)},value:x,my:"4",children:[(0,r.jsx)(k.lX,{fontSize:"sm",color:"gray.600",children:"Link Version"}),(0,r.jsxs)(s.Kq,{direction:"row",spacing:5,children:[(0,r.jsx)(w.Y8,{value:"v1",children:"V1 (Legacy JSON)"}),(0,r.jsx)(w.Y8,{value:"v2",children:"V2 (Short)"}),(0,r.jsx)(w.Y8,{value:"v3",children:"V3 (Experimental)"})]})]}),(0,r.jsxs)(C.BZ,{my:"4",children:[(0,r.jsx)(C.II,{type:"text",defaultValue:j,disabled:!0}),(0,r.jsx)(C.xW,{px:0,mx:0,bg:"gray.50",children:(0,r.jsx)(l.hU,{icon:(0,r.jsx)(o.TI,{}),variant:"flushed",onClick:f,"aria-label":"Copy Link"})})]}),v?(0,r.jsx)(l.zx,{w:"full",onClick:g,bg:"blue.500",color:"white",size:"lg",children:"Share"}):null]})]})]})}));function z(e){var n=e.meal,i=e.onRepeat,p=e.onDelete,b=e.onEdit,w=e.onBookmark,k=e.bookmarked,C=(0,u.useState)(!1),y=C[0],z=C[1],S=(0,u.useState)(!1),Z=S[0],O=S[1],N=(0,u.useState)(!1),B=N[0],R=N[1],U=(0,u.useCallback)((function(){return O(!1)}),[]),E=(0,u.useCallback)((function(){return O(!0)}),[]),_=(0,u.useCallback)((function(){return R(!1)}),[]),A=(0,u.useCallback)((function(){return R(!0)}),[]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.kC,{justify:"space-between",align:"center",mb:"2",children:[(0,r.jsx)(s.X6,{size:"md",children:n.name}),(0,r.jsxs)(s.kC,{justify:"flex-end",align:"center",children:[(0,r.jsx)(l.hU,{isRound:!0,size:"sm",variant:"ghost","aria-label":"Show micro nutrients",onClick:E,icon:(0,r.jsx)(x.bRw,{})}),(0,r.jsx)(l.hU,{isRound:!0,size:"sm",variant:"ghost","aria-label":y?"Hide Details":"Show Details",onClick:function(){return z(!y)},icon:y?(0,r.jsx)(o.g8,{}):(0,r.jsx)(o.v4,{})}),(0,r.jsxs)(a.v2,{children:[(0,r.jsx)(a.j2,{as:l.hU,icon:(0,r.jsx)(h.FQA,{}),"aria-label":"Options",variant:"ghost",size:"sm",rounded:"full"}),(0,r.jsxs)(a.qy,{minW:10,children:[b&&(0,r.jsxs)(a.sN,{onClick:b,children:[(0,r.jsx)(o.dY,{mr:2}),"Edit"]}),p&&(0,r.jsxs)(a.sN,{onClick:p,children:[(0,r.jsx)(o.pJ,{mr:2}),"Delete"]}),(0,r.jsxs)(a.sN,{onClick:A,children:[(0,r.jsx)(o.xP,{mr:2}),"Share"]}),i&&(0,r.jsxs)(a.sN,{onClick:i,children:[(0,r.jsx)(o.Ay,{mr:2}),"Repeat"]}),w&&(0,r.jsxs)(a.sN,{onClick:w,children:[(0,r.jsx)(s.xu,{mr:2,children:k?(0,r.jsx)(d.enf,{}):(0,r.jsx)(d.XiH,{})}),k?"Unbookmark":"Bookmark"]})]})]})]})]}),(0,r.jsx)(v.Z,{nutrition:n.nutrition,border:!1,micro:n.micro}),(0,r.jsxs)(s.kC,{align:"center",flex:"1",mt:"2",mb:"6",children:[(0,r.jsx)(s.xv,{fontSize:"xs",color:"gray.600",fontWeight:"300",children:n.portionWeight===n.totalWeight?"".concat(n.totalWeight,"g"):"".concat(n.portionWeight,"g / ").concat(n.totalWeight,"g")}),(0,r.jsx)(s.xu,{w:"1px",h:"20px",bg:"gray.500",mx:"2"}),(0,r.jsx)(s.xv,{fontSize:"xs",color:"gray.600",fontWeight:"300",children:(0,j.CC)(new Date(n.timestamp))})]}),(0,r.jsx)(c.UO,{in:y,children:(0,r.jsxs)(s.xu,{pl:"4",children:[(0,r.jsx)(f.Z,{size:"sm",item:{name:"Nutritional Value / 100 grams",weight:100,nutrition:(0,m.Q_)(n.nutrition,(function(e,i){return 100*i/n.portionWeight})),micro:Object.fromEntries(Object.entries(n.micro||{}).map((function(e){var i=(0,t.Z)(e,2);return[i[0],100*i[1]/n.portionWeight]})))},bg:"blue.50",rounded:"md"}),n.items.map((function(e,n){return(0,r.jsx)(f.Z,{item:e,size:"sm"},n)}))]})}),(0,r.jsx)(g.Z,{hideWeight:!0,item:{name:n.name,nutrition:n.nutrition,micro:n.micro,weight:100},onClose:U,isOpen:Z}),(0,r.jsx)(W,{isOpen:B,onClose:_,meal:n})]})}var S=(0,u.memo)(z)},100:function(e,n,i){function t(e,n){var i=e.currentTarget.closest("[data-".concat(n,"]"));return i?i.dataset[n]:null}function r(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return new Promise((function(i,t){var r=new FileReader;r.onload=function(e){var n;i(null===(n=e.target)||void 0===n?void 0:n.result)},r.onerror=function(){t(r.error),r.abort()},r.readAsText(e,n)}))}i.d(n,{p:function(){return r},x:function(){return t}})}}]);