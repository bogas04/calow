"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[541],{4175:function(e,n,i){var t=i(828),r=i(5893),o=i(3826),s=i(8641),a=i(7741),l=i(5868),c=i(7294),u=i(1976);function d(e){var n,i,c=e.item,d=e.isOpen,x=e.hideWeight,h=void 0!==x&&x,m=e.onClose,j=0!==Object.keys(null!==(n=c.micro)&&void 0!==n?n:{}).length;return(0,r.jsxs)(o.u_,{isOpen:d,onClose:m,size:"full",scrollBehavior:"inside",children:[(0,r.jsx)(o.ZA,{}),(0,r.jsxs)(o.hz,{pb:5,children:[(0,r.jsx)(o.xB,{children:(0,r.jsxs)(s.kC,{align:"center",justify:"space-between",children:[c.name," ",h?"":"(".concat(c.weight,"g)"),(0,r.jsx)(a.hU,{"aria-label":"close",rounded:"full",icon:(0,r.jsx)(l.P,{}),variant:"ghost",onClick:m})]})}),(0,r.jsxs)(o.fe,{children:[(0,r.jsx)(u.Z,{nutrition:c.nutrition,border:!1}),j&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.xv,{size:"lg",fontWeight:"600",mt:"5",mb:"2",children:"Micro Nutrients (in grams):"}),Object.entries(null!==(i=c.micro)&&void 0!==i?i:{}).map((function(e){var n=(0,t.Z)(e,2),i=n[0],o=n[1];return(0,r.jsxs)(s.kC,{justify:"space-between",align:"center",my:"1",children:[(0,r.jsx)(s.xv,{textTransform:"capitalize",fontWeight:"400",children:i}),(0,r.jsx)(s.xv,{children:Number(o*c.weight/100).toFixed(2)})]},i)}))]})]})]})]})}n.Z=(0,c.memo)(d)},6917:function(e,n,i){var t=i(6042),r=i(9396),o=i(9534),s=i(5893),a=i(1664),l=i.n(a),c=i(8641),u=i(7741),d=i(7294),x=i(1976),h=i(3750),m=i(4175);function j(e){var n=e.item,i=e.size,a=void 0===i?"lg":i,j=(0,o.Z)(e,["item","size"]),f=(0,d.useState)(!1),g=f[0],p=f[1];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(c.xu,(0,r.Z)((0,t.Z)({borderWidth:"1px",borderStyle:"solid",borderColor:"gray.200",borderRadius:8,my:"sm"===a?3:5,p:"sm"===a?3:5},j),{children:[(0,s.jsx)(c.kC,{mb:"sm"===a?2:4,justify:"space-between",children:(0,s.jsx)(c.X6,{size:"sm"===a?"sm":"md",children:(0,s.jsx)(l(),{href:"/items?search=".concat(n.name),children:(0,s.jsxs)("a",{children:[(0,s.jsx)(c.xu,{as:"span",mx:"sm"===a?0:2,children:n.icon||"\ud83c\udf5b"})," ",n.name]})})})}),(0,s.jsxs)(c.kC,{justify:"space-between",align:"flex-start",children:[(0,s.jsx)(x.Z,{border:!1,nutrition:n.nutrition,transparentBg:!0,micro:n.micro}),n.micro&&(0,s.jsx)(u.hU,{variant:"ghost",rounded:"full",color:"gray.500",icon:(0,s.jsx)(h.evw,{}),"aria-label":"Micronutrients",onClick:function(){return p(!0)}})]}),(0,s.jsxs)(c.xv,{mt:"2",fontSize:"xs",color:"gray.600",fontWeight:"300",children:[n.weight,"g"]})]})),(0,s.jsx)(m.Z,{item:n,onClose:function(){return p(!1)},isOpen:g})]})}n.Z=(0,d.memo)(j)},3305:function(e,n,i){i.d(n,{Z:function(){return y}});var t=i(828),r=i(5893),o=i(3382),s=i(8641),a=i(7741),l=i(5679),c=i(1197),u=i(7294),d=i(7516),x=i(3750),h=i(471),m=i(3437),j=i(5385),f=i(4175),g=i(6917),p=i(1976),v=i(4221),b=i(3826),w=i(979);var C=(0,u.memo)((function(e){var n,i,l=e.isOpen,c=e.onClose,d=e.meal,x=(0,v.pm)(),h=(0,u.useMemo)((function(){var e;if(!l)return"";d.name,Date.now(),d.items,d.totalWeight,d.portionWeight,d.nutrition,d.micro,d.water;var n=(null===(e=document.querySelector('meta[property="og:url"'))||void 0===e?void 0:e.getAttribute("content"))||"https://bogas04.github.io/calow/";return function(e,n){var i=structuredClone(e),r=function(e){return"".concat(n,"meal-entry?shared_meal=").concat(encodeURIComponent(e))},o=r(JSON.stringify(i));if(o.length<2e3)return o;var s=100/i.portionWeight,a=Object.fromEntries(Object.entries(i.micro||{}).map((function(e){var n=(0,t.Z)(e,2);return[n[0],n[1]*s]})));return i.items=[{name:i.name,nutrition:i.nutrition,micro:a,weight:i.portionWeight}],i.totalWeight=i.portionWeight,r(JSON.stringify(i))}(d,n)}),[l,d]),m=(0,u.useCallback)((function(){var e,n,i=function(){return x({title:"Oops!",description:"We couldn't share the link at this moment",status:"error",duration:5e3,isClosable:!0})};(null===window||void 0===window||null===(e=window.navigator)||void 0===e||null===(n=e.share)||void 0===n?void 0:n.call(e,{title:d.name,url:h}).catch((function(){i()})))||i()}),[h,d.name,x]),j=(0,u.useCallback)((function(){window.navigator.clipboard.writeText(h).then((function(){x({title:"Copied!",description:"The shareable link is now in your clipboard",status:"success",duration:5e3,isClosable:!0})})).catch((function(){x({title:"Opps!",description:"We couldn't copy the link to your clipboard",status:"error",duration:5e3,isClosable:!0})}))}),[h,x]),f=(null===window||void 0===window||null===(n=window.navigator)||void 0===n||null===(i=n.canShare)||void 0===i?void 0:i.call(n))||"function"===typeof(null===window||void 0===window?void 0:window.navigator.share);return(0,r.jsxs)(b.u_,{isOpen:l,onClose:c,isCentered:!0,scrollBehavior:"outside",motionPreset:"slideInBottom",children:[(0,r.jsx)(b.ZA,{height:"100vh"}),(0,r.jsxs)(b.hz,{position:"fixed",bottom:"0px",mb:"0",borderRadius:"1.75rem 1.75rem 0px 0px",minW:["100vw","lg"],children:[(0,r.jsx)(b.xB,{mt:"2",children:"Share Meal"}),(0,r.jsx)(b.ol,{mt:"2"}),(0,r.jsxs)(b.fe,{pb:"5",children:[(0,r.jsx)(s.xv,{children:"Here's a link you can share with your buddy who wants to add this meal to their log."}),(0,r.jsxs)(w.BZ,{my:"4",children:[(0,r.jsx)(w.II,{type:"text",defaultValue:h,disabled:!0}),(0,r.jsx)(w.xW,{px:0,mx:0,bg:"gray.50",children:(0,r.jsx)(a.hU,{icon:(0,r.jsx)(o.TI,{}),variant:"flushed",onClick:j,"aria-label":"Copy Link"})})]}),f?(0,r.jsx)(a.zx,{w:"full",onClick:m,bg:"blue.500",color:"white",size:"lg",children:"Share"}):null]})]})]})}));function k(e){var n=e.meal,i=e.onRepeat,v=e.onDelete,b=e.onEdit,w=e.onBookmark,k=e.bookmarked,y=(0,u.useState)(!1),W=y[0],Z=y[1],z=(0,u.useState)(!1),S=z[0],O=z[1],N=(0,u.useState)(!1),R=N[0],B=N[1],T=(0,u.useCallback)((function(){return O(!1)}),[]),F=(0,u.useCallback)((function(){return O(!0)}),[]),U=(0,u.useCallback)((function(){return B(!1)}),[]),I=(0,u.useCallback)((function(){return B(!0)}),[]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.kC,{justify:"space-between",align:"center",mb:"2",children:[(0,r.jsx)(s.X6,{size:"md",children:n.name}),(0,r.jsxs)(s.kC,{justify:"flex-end",align:"center",children:[(0,r.jsx)(a.hU,{isRound:!0,size:"sm",variant:"ghost","aria-label":"Show micro nutrients",onClick:F,icon:(0,r.jsx)(h.bRw,{})}),(0,r.jsx)(a.hU,{isRound:!0,size:"sm",variant:"ghost","aria-label":W?"Hide Details":"Show Details",onClick:function(){return Z(!W)},icon:W?(0,r.jsx)(o.g8,{}):(0,r.jsx)(o.v4,{})}),(0,r.jsxs)(l.v2,{children:[(0,r.jsx)(l.j2,{as:a.hU,icon:(0,r.jsx)(x.FQA,{}),"aria-label":"Options",variant:"ghost",size:"sm",rounded:"full"}),(0,r.jsxs)(l.qy,{minW:10,children:[b&&(0,r.jsxs)(l.sN,{onClick:b,children:[(0,r.jsx)(o.dY,{mr:2}),"Edit"]}),v&&(0,r.jsxs)(l.sN,{onClick:v,children:[(0,r.jsx)(o.pJ,{mr:2}),"Delete"]}),(0,r.jsxs)(l.sN,{onClick:I,children:[(0,r.jsx)(o.xP,{mr:2}),"Share"]}),i&&(0,r.jsxs)(l.sN,{onClick:i,children:[(0,r.jsx)(o.Ay,{mr:2}),"Repeat"]}),w&&(0,r.jsxs)(l.sN,{onClick:w,children:[(0,r.jsx)(s.xu,{mr:2,children:k?(0,r.jsx)(d.enf,{}):(0,r.jsx)(d.XiH,{})}),k?"Unbookmark":"Bookmark"]})]})]})]})]}),(0,r.jsx)(p.Z,{nutrition:n.nutrition,border:!1,micro:n.micro}),(0,r.jsxs)(s.kC,{align:"center",flex:"1",mt:"2",mb:"6",children:[(0,r.jsx)(s.xv,{fontSize:"xs",color:"gray.600",fontWeight:"300",children:n.portionWeight===n.totalWeight?"".concat(n.totalWeight,"g"):"".concat(n.portionWeight,"g / ").concat(n.totalWeight,"g")}),(0,r.jsx)(s.xu,{w:"1px",h:"20px",bg:"gray.500",mx:"2"}),(0,r.jsx)(s.xv,{fontSize:"xs",color:"gray.600",fontWeight:"300",children:(0,j.CC)(new Date(n.timestamp))})]}),(0,r.jsx)(c.UO,{in:W,children:(0,r.jsxs)(s.xu,{pl:"4",children:[(0,r.jsx)(g.Z,{size:"sm",item:{name:"Nutritional Value / 100 grams",weight:100,nutrition:(0,m.Q_)(n.nutrition,(function(e,i){return 100*i/n.portionWeight})),micro:Object.fromEntries(Object.entries(n.micro||{}).map((function(e){var i=(0,t.Z)(e,2);return[i[0],100*i[1]/n.portionWeight]})))},bg:"blue.50",rounded:"md"}),n.items.map((function(e,n){return(0,r.jsx)(g.Z,{item:e,size:"sm"},n)}))]})}),(0,r.jsx)(f.Z,{hideWeight:!0,item:{name:n.name,nutrition:n.nutrition,micro:n.micro,weight:100},onClose:T,isOpen:S}),(0,r.jsx)(C,{isOpen:R,onClose:U,meal:n})]})}var y=(0,u.memo)(k)},1976:function(e,n,i){var t=i(6042),r=i(9396),o=i(5893),s=i(8641),a=i(7294),l=i(2780);function c(e){var n=e.micro,i=e.nutrition,a=e.border,c=void 0===a||a,u=e.showLegend,d=void 0===u?!c:u,x=e.transparentBg,h=void 0!==x&&x;return(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)(s.rj,(0,r.Z)((0,t.Z)({gridTemplateColumns:"repeat(4, auto)",zIndex:0,gridGap:c?4:6,bg:h?"transparent":"white"},c?{boxShadow:"md",rounded:"3xl",p:4,px:d&&c?6:4}:{}),{children:l.$I.map((function(e,n){var t=i[e];return(0,o.jsxs)(s.kC,{direction:"column",textTransform:"capitalize",justify:"center",align:"flex-start",children:[(0,o.jsxs)(s.xv,{color:l.MT[e],fontWeight:"600",fontSize:"xs",children:[Number.isInteger(t)?t:t.toFixed(2),l.sw[e]]}),d&&(0,o.jsx)(s.xv,{fontSize:"xs",children:l.S$[e]})]},n)}))})),n&&l.RX.some((function(e){return n[e]}))?(0,o.jsx)("div",{className:c?"-mt-5 flex justify-center gap-4 rounded-b-3xl bg-gray-100 pt-7 pb-2":"-mt-5 flex gap-2 overflow-x-auto pt-7 pb-2",children:l.RX.filter((function(e){return n[e]})).map((function(e,i,t){var r=t.length-1===i,s=n[e];if(s)return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex items-center gap-1 text-xs",children:[(0,o.jsxs)("p",{className:"text-center text-gray-800",children:[s.toFixed(2),"g"]}),(0,o.jsx)("p",{className:"capitalize text-gray-500",children:e})]}),c?null:r?"":"/"]})}))}):null]})}n.Z=(0,a.memo)(c)},7647:function(e,n,i){i.d(n,{T:function(){return l}});var t=i(6042),r=i(9396),o=i(9534),s=i(5893),a=i(8641),l=function(e){var n=e.heading,i=e.children,l=(0,o.Z)(e,["heading","children"]);return(0,s.jsxs)(a.xu,(0,r.Z)((0,t.Z)({py:["2","6","12"],px:["4","16","32"]},l),{children:[n&&"string"===typeof n?(0,s.jsx)(a.X6,{my:"6",children:n}):n,i]}))}},100:function(e,n,i){function t(e,n){var i=e.currentTarget.closest("[data-".concat(n,"]"));return i?i.dataset[n]:null}function r(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return new Promise((function(i,t){var r=new FileReader;r.onload=function(e){var n;i(null===(n=e.target)||void 0===n?void 0:n.result)},r.onerror=function(){t(r.error),r.abort()},r.readAsText(e,n)}))}i.d(n,{p:function(){return r},x:function(){return t}})}}]);